<!doctype html>
<html>

<head>
  <meta name="generator" content="JSDoc 3.5.5">
  <meta charset="utf-8">
  <title>BBM Enterprise SDK for JavaScript 1.2.0 &raquo; Interface: MessageStorageInterface</title>
  <link rel="stylesheet" href="https://brick.a.ssl.fastly.net/Karla:400,400i,700,700i" type="text/css">
  <link rel="stylesheet" href="https://brick.a.ssl.fastly.net/Noto+Serif:400,400i,700,700i" type="text/css">
  <link rel="stylesheet" href="https://brick.a.ssl.fastly.net/Inconsolata:500" type="text/css">
  <link href="css/baseline.css" rel="stylesheet">
</head>

<body onload="prettyPrint()">
  <nav id="jsdoc-navbar" role="navigation" class="jsdoc-navbar">
    <div id="jsdoc-navbar-container">
      <div id="jsdoc-navbar-content">
        <a href="index.html" class="jsdoc-navbar-package-name">BBM Enterprise SDK for JavaScript 1.<wbr>2.<wbr>0</a>
      </div>
    </div>
  </nav>
  <div id="jsdoc-body-container">
    <div id="jsdoc-content">
      <div id="jsdoc-content-container">
        <div id="jsdoc-main" role="main">
          <header class="page-header">
            <div class="symbol-detail-labels"><span class="label label-kind">interface</span>&nbsp;<span class="label label-static">static</span></div>
            <h1><small><a href="BBMEnterprise.html">BBMEnterprise</a>.<wbr></small><span class="symbol-name">MessageStorageInterface</span></h1>
            <div class="symbol-description">
              <p>The MessageStorageInterface defines the interface through which the Spark SDK allows a client to create a backing store for the messages in a chat.<br/>
                <br/> A client may wish to override the default backing store, in order to hook all changes to the list and update UI in accordance. The underlying data structure must be an array; however, the SDK will only modify this array through the
                array's splice method (it assumes the standard Array.splice interface). As such, a client may override the splice call to track modifications to the array.<br/>
                <br/> A client may also specify wrapping and unwrapping functions, to wrap each message in a custom wrapper, in order to associate additional data with each message.</p>
            </div>
            <dl class="dl-compact">
            </dl>
          </header>
          <section id="summary">
            <div class="summary-callout">
              <h2 class="summary-callout-heading">Method</h2>
              <div class="summary-content">
                <div class="summary-column">
                  <dl class="dl-summary-callout">
                    <dt><a href="BBMEnterprise.MessageStorageInterface.html#allocate">allocate(chatId)</a></dt>
                    <dd>
                    </dd>
                  </dl>
                </div>
                <div class="summary-column">
                </div>
                <div class="summary-column">
                </div>
              </div>
            </div>
            <div class="summary-callout">
              <h2 class="summary-callout-heading">Abstract types</h2>
              <div class="summary-content">
                <div class="summary-column">
                  <dl class="dl-summary-callout">
                    <dt><a href="BBMEnterprise.MessageStorageInterface.html#.GetMessageFunction">GetMessageFunction(message)</a></dt>
                    <dd>
                    </dd>
                    <dt><a href="BBMEnterprise.MessageStorageInterface.html#.GetMessagesFunction">GetMessagesFunction(message)</a></dt>
                    <dd>
                    </dd>
                  </dl>
                </div>
                <div class="summary-column">
                  <dl class="dl-summary-callout">
                    <dt><a href="BBMEnterprise.MessageStorageInterface.html#.MessageStorage">MessageStorage</a></dt>
                    <dd>
                    </dd>
                    <dt><a href="BBMEnterprise.MessageStorageInterface.html#.MessageStorageAllocator">MessageStorageAllocator(chatId)</a></dt>
                    <dd>
                    </dd>
                  </dl>
                </div>
                <div class="summary-column">
                  <dl class="dl-summary-callout">
                    <dt><a href="BBMEnterprise.MessageStorageInterface.html#.NewMessageFunction">NewMessageFunction(message)</a></dt>
                    <dd>
                    </dd>
                  </dl>
                </div>
              </div>
            </div>
          </section>
          <section>
            <h2>Method</h2>
            <section>
              <h3 id="allocate"><span class="symbol-name">allocate</span><span class="signature"><span class="signature-params">(chatId)</span>&nbsp;&rarr; <span class="signature-returns"> <a href="BBMEnterprise.MessageStorageInterface.html#.MessageStorage">BBMEnterprise.MessageStorageInterface.MessageStorage</a></span></span>
              </h3>
              <p>Allocates the storage object for a particular chat.</p>
              <section>
                <h4>Parameter</h4>
                <table class="jsdoc-details-table">
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Optional</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <p>chatId</p>
                      </td>
                      <td>
                        <p>string</p>
                      </td>
                      <td>
                        <p>&nbsp;</p>
                      </td>
                      <td>
                        <p>The chat for which to allocate storage.</p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </section>
              <dl class="dl-compact">
                <dt>Returns</dt>
                <dd>
                  <p><code><a href="BBMEnterprise.MessageStorageInterface.html#.MessageStorage">BBMEnterprise.MessageStorageInterface.MessageStorage</a></code>&nbsp;
                    <p>An object containing the functions needed to store and access messages in a chat.</p>
                  </p>
                </dd>
              </dl>
            </section>
            <h2>Abstract types</h2>
            <section>
              <div class="symbol-detail-labels"><span class="label label-static">static</span></div>
              <h3 id=".GetMessageFunction"><span class="symbol-name">GetMessageFunction</span><span class="signature"><span class="signature-params">(message)</span>&nbsp;&rarr; <span class="signature-returns"> <a href="BBMEnterprise.Messenger.ChatMessage.html">BBMEnterprise.Messenger.ChatMessage</a></span></span>
              </h3>
              <p>A function which unwraps an object from the chat list to produce a
                <a href="BBMEnterprise.Messenger.ChatMessage.html">BBMEnterprise.Messenger.ChatMessage</a>. This function undoes
                <a href="BBMEnterprise.MessageStorageInterface.html#.NewMessageFunction">BBMEnterprise.MessageStorageInterface.NewMessageFunction</a>, such that GetMessageFunction(NewMessageFunction(x)) === x for all x.</p>
              <section>
                <h4>Parameter</h4>
                <table class="jsdoc-details-table">
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Optional</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <p>message</p>
                      </td>
                      <td>
                        <p>any</p>
                      </td>
                      <td>
                        <p>&nbsp;</p>
                      </td>
                      <td>
                        <p>The message to unwrap.</p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </section>
              <dl class="dl-compact">
                <dt>Returns</dt>
                <dd>
                  <p><code><a href="BBMEnterprise.Messenger.ChatMessage.html">BBMEnterprise.Messenger.ChatMessage</a></code>&nbsp;
                    <p>The original ChatMessage which had been wrapped.</p>
                  </p>
                </dd>
              </dl>
              <div class="symbol-detail-labels"><span class="label label-static">static</span></div>
              <h3 id=".GetMessagesFunction"><span class="symbol-name">GetMessagesFunction</span><span class="signature"><span class="signature-params">(message)</span>&nbsp;&rarr; <span class="signature-returns"> any</span></span>
              </h3>
              <p>A function which takes the message list and applies a transform prior to returning it. This can be used to perform tasks such as freezing or filtering the message list.</p>
              <section>
                <h4>Parameter</h4>
                <table class="jsdoc-details-table">
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Optional</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <p>message</p>
                      </td>
                      <td>
                        <p>Array of any</p>
                      </td>
                      <td>
                        <p>&nbsp;</p>
                      </td>
                      <td>
                        <p>The message list to transform.</p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </section>
              <dl class="dl-compact">
                <dt>Returns</dt>
                <dd>
                  <p><code>any</code>&nbsp;
                    <p>The message list in any form the client may want.</p>
                  </p>
                </dd>
              </dl>
              <div class="symbol-detail-labels"><span class="label label-static">static</span></div>
              <h3 id=".MessageStorage"><span class="symbol-name">MessageStorage</span><small class="property-type">
            &nbsp;Object</small></h3>
              <p>A structure to encapsulate the data associated with message storage for a single chat. This comprises an array to contain the messages, accessor functions to get data in and out of messages, and a global accessor function to apply global
                effects to the array.</p>
              <section>
                <h4>Properties</h4>
                <table class="jsdoc-details-table">
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Optional</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <p>storageArray</p>
                      </td>
                      <td>
                        <p>Array of any</p>
                      </td>
                      <td>
                        <p>&nbsp;</p>
                      </td>
                      <td>
                        <p>An array in which to store the messages for a chat. The messages will be sorted in order of messageId. The type of objects in the array will be the type returned by newMessage.</p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>newMessage</p>
                      </td>
                      <td>
                        <p><a href="BBMEnterprise.MessageStorageInterface.html#.NewMessageFunction">BBMEnterprise.MessageStorageInterface.NewMessageFunction</a></p>
                      </td>
                      <td>
                        <p>&nbsp;</p>
                      </td>
                      <td>
                        <p>A function which wraps a <a href="BBMEnterprise.Messenger.ChatMessage.html">BBMEnterprise.Messenger.ChatMessage</a> to produce an object which will be stored in the chat list. This allows a client to associate custom data with
                          a chat message.</p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>getMessage</p>
                      </td>
                      <td>
                        <p><a href="BBMEnterprise.MessageStorageInterface.html#.GetMessageFunction">BBMEnterprise.MessageStorageInterface.GetMessageFunction</a></p>
                      </td>
                      <td>
                        <p>&nbsp;</p>
                      </td>
                      <td>
                        <p>A function which unwraps a wrapped
                          <a href="BBMEnterprise.Messenger.ChatMessage.html">BBMEnterprise.Messenger.ChatMessage</a> to produce the original
                          <a href="BBMEnterprise.Messenger.ChatMessage.html">BBMEnterprise.Messenger.ChatMessage</a>. This undoes the effects of newMessage.
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <p>getMessages</p>
                      </td>
                      <td>
                        <p><a href="BBMEnterprise.MessageStorageInterface.html#.GetMessagesFunction">BBMEnterprise.MessageStorageInterface.GetMessagesFunction</a></p>
                      </td>
                      <td>
                        <p>&nbsp;</p>
                      </td>
                      <td>
                        <p>A function which applies a transform to the message list prior to returning it.</p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </section>
              <dl class="dl-compact">
              </dl>
              <div class="symbol-detail-labels"><span class="label label-static">static</span></div>
              <h3 id=".MessageStorageAllocator"><span class="symbol-name">MessageStorageAllocator</span><span class="signature"><span class="signature-params">(chatId)</span>&nbsp;&rarr; <span class="signature-returns"> <a href="BBMEnterprise.MessageStorageInterface.html#.MessageStorage">BBMEnterprise.MessageStorageInterface.MessageStorage</a></span></span>
              </h3>
              <p>A function which allocates the storage object for a specific chat.</p>
              <section>
                <h4>Parameter</h4>
                <table class="jsdoc-details-table">
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Optional</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <p>chatId</p>
                      </td>
                      <td>
                        <p>string</p>
                      </td>
                      <td>
                        <p>&nbsp;</p>
                      </td>
                      <td>
                        <p>The identifier of the chat for which storage for messages must be allocated.
                        </p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </section>
              <dl class="dl-compact">
                <dt>Returns</dt>
                <dd>
                  <p><code><a href="BBMEnterprise.MessageStorageInterface.html#.MessageStorage">BBMEnterprise.MessageStorageInterface.MessageStorage</a></code>&nbsp;
                    <p>The return value is used for the client-visible version of a chatMessage. It can be of any type.</p>
                  </p>
                </dd>
              </dl>
              <div class="symbol-detail-labels"><span class="label label-static">static</span></div>
              <h3 id=".NewMessageFunction"><span class="symbol-name">NewMessageFunction</span><span class="signature"><span class="signature-params">(message)</span>&nbsp;&rarr; <span class="signature-returns"> any</span></span>
              </h3>
              <p>A function which wraps a <a href="BBMEnterprise.Messenger.ChatMessage.html">BBMEnterprise.Messenger.ChatMessage</a> to produce an object which will be stored in the chat list. This allows a client to associate custom data with a chat message.</p>
              <section>
                <h4>Parameter</h4>
                <table class="jsdoc-details-table">
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Optional</th>
                      <th>Description</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <p>message</p>
                      </td>
                      <td>
                        <p><a href="BBMEnterprise.Messenger.ChatMessage.html">BBMEnterprise.Messenger.ChatMessage</a></p>
                      </td>
                      <td>
                        <p>&nbsp;</p>
                      </td>
                      <td>
                        <p>The message to wrap.</p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </section>
              <dl class="dl-compact">
                <dt>Returns</dt>
                <dd>
                  <p><code>any</code>&nbsp;
                    <p>The return value is used for the client-visible version of a chatMessage. It can be of any type.</p>
                  </p>
                </dd>
              </dl>
            </section>
          </section>
        </div>
      </div>
      <nav id="jsdoc-toc-nav" role="navigation"></nav>
    </div>
  </div>
  <script src="scripts/jquery.min.js"></script>
  <script src="scripts/jquery.cookie.js"></script>
  <script src="scripts/tree.jquery.js"></script>
  <script src="scripts/prettify.js"></script>
  <script src="scripts/jsdoc-toc.js"></script>
  <script src="scripts/linenumber.js"></script>
  <script src="scripts/scrollanchor.js"></script>
</body>

</html>