<!DOCTYPE html>

<!--
 Copyright 2018 BlackBerry. All Rights Reserved.

 You must obtain a license from and pay any applicable license fees to
 BlackBerry before you may reproduce, modify or distribute this software, or
 any work that includes all or part of this software.
-->

<html>
  <head>
    <meta charset="utf-8"/>
    <title>Rich Chat</title>
    <link rel="icon" type="image/png" href="images/favicon.ico">
    <link rel="stylesheet" type="text/css" href="css/rich_chat_style.css" />
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,900" rel="stylesheet" type="text/css"/>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script type="text/javascript" src="node_modules/@webcomponents/webcomponentsjs/webcomponents-lite.js"></script>

    <!-- Load utility classes -->
    <script type="text/javascript" src="../support/util/TimeRangeFormatter.js"></script>
    <script type="text/javascript" src="../support/util/MessageFormatter.js"></script>
    <script type="text/javascript" src="../support/auth/GenericAuthHelper.js"></script>
    <script type="text/javascript" src="../support/identity/GenericUserInfo.js"></script>

    <!-- Import custom controls -->
    <link rel="import" href="node_modules/bbmChat/bbmChat.html">
    <link rel="import" href="node_modules/bbmCall/bbmCall.html"/>
    <link rel="import" href="node_modules/bbmContactList/bbmContactList.html"/>
    <link rel="import" href="node_modules/bbmChatUserPassword/bbmChatUserPassword.html"/>

    <!-- Load BBM Enterprise SDK -->
    <script type="text/javascript" src="../../sdk/bbm_sdk_web.js"></script>

    <!-- Use below .js files for Firebase / Google configuration -->
    <script type="text/javascript" src="https://www.gstatic.com/firebasejs/3.6.4/firebase.js"></script>
    <script type="text/javascript" src="../support/identity/FirebaseUserManager.js"></script>
    <script type="text/javascript" src="../support/auth/GoogleAuthManager.js"></script>
    <script type="text/javascript" src="js/config_google.js"></script>

    <!-- Use below *.js files for CosmosDB / Azure configuration -->
    <!--
    <script type="text/javascript" src="../support/auth/AzureAuthManager.js"></script>
    <script type="text/javascript" src="../support/identity/AzureUserManager.js"></script>
    <script type="text/javascript" src="js/config_azure.js"></script>
    -->
  </head>
  <body>
    <div class="headerBanner">
      <img class="headerImage" id="headerImage" src="./images/favicon.ico">
      <p class="headerText" id = "headerText">Rich Chat</p>
      <div class="headerButtonsDiv">
        <div class="headerButtonDiv">
          <button class="settingsButton" onclick="showSettingsPane()" id="settingsButton"></button>
        </div>
      </div>
    </div>
    <div class="mainScreen" id = "mainScreen" style="display:none">
      <div class="tabPane">
        <div class="chat-list-container" id="chatListContainer">
          <div class="listHeader" id="listHeader">
            <div class="listHeaderText" id="listHeaderText">Chats</div>
            <div class="listHeaderButtonWrapper">
              <button class="listHeaderButton" onclick="showContactsClick()" id="listHeaderButton"></button>
            </div>
          </div>
          <div class="chatList" id="chatList">
            <div id="chatListRowPlaceholder"></div>
          </div>
        </div>
        <bbm-contact-list id="bbmContactList" style="position:absolute; display:none"></bbm-contact-list>
      </div>
      <div class="contentPane">
        <div class="fileSendDragDropOverlay" id="fileSendDragDropOverlay" ondrop="onFileSendDropHandler(event)" ondragover="onFileSendDragoverHandler(event)" ondragleave="onFileSendDragendHandler(event)" hidden>
          <div class="fileSendDragDropOverlayText">Drop to send files to the participants</div>
        </div>
        <bbm-chat id="conversationPane" class="conversationPane"></bbm-chat>
        <div class="placeHolderWrapper" id="contentPanePlaceHolder">
          <div class="placeHolderImgWrapper">
            <img class="contentPanePlaceHolderImg" id="contentPanePlaceHolderImg">
          </div>
          <p class="contentPanePlaceHolderText" id = "contentPanePlaceHolderText"></p>
        </div>
      </div>
    </div>
    <div class="loginPane" id="loginPane" >
      <p class="loginHeader"><img class="loginImg" src="./images/favicon.ico" width="40" height="40"> Rich Chat</p>
      <p class="loginBody">
        A sample web app using the BBM Enterprise SDK for JavaScript.
      </p>
      <div class="loginStatus" id="loginStatus"></div>
      <div id="loginBtnDiv" class="login">
        <center><button id="signInButton" class="loginBtn">SIGN IN</button></center>
      </div>
    </div>
    <div class="settingsPane" id="settingsPane" style="display:none">
      <p id="userName">Display Name:</p>
      <p id="email">Email:</p>
      <p id="domain">Domain:</p>
      <p id="registrationState">Registration State:</p>
      <p id="localRegId">Local RegID:</p>
      <p id="localPIN">Local PIN:</p>
      <div class="settingsPaneBtnDiv">
        <button id = "logoutBtn" onclick="showLogoutDialog()">SIGN OUT</button>
        <button onclick="closeSettingsPane()">CLOSE SETTINGS</button>
      </div>
    </div>
    <script type="text/javascript" src="js/rich_chat_script.js"></script>
  </body>
</html>
